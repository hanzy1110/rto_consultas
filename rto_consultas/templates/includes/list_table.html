<!-- myapp/mymodel_list.html -->
{% extends 'layouts/base.html' %}

{% block content %}
{% load render_table from django_tables2 %}
{% load getattr %}
<h1>{{ context_object_name }}</h1>
<div class="card-body px-0 pt-0 pb-2">
<form method="GET">
  <table width="90%" style="margin-left: 10px;">
    {% comment %} Render the "Nueva Revisi√≥n" button {% endcomment %}
    <tr>
    {% for ffield, vals in form_fields.items %}
      <td>
      <label for={{ ffield }}>{% query_dict parsed_fields ffield %}</label>
      <select name="{{ ffield }}" id="{{ ffield }}">
        <option value=""></option>
      {% for val in vals %}
        <option value="{{ val }}">{% query_descriptions descriptions ffield val %}</option>
      {% endfor %}
      </select>
      </td>
    {% endfor %}
    </tr>
    <tr>
      <td><b>Buscar</b></td>
    </tr>
    <tr>
    {% for field in query_fields %}
        <td>
        <label for={{ ffield }}>{% query_dict parsed_fields field %}</label>
        <input id="{% query_dict ids field %}" type="{% query_dict types field %}" name="{{ field }}" placeholder="Buscar...">
        </td>
    {% endfor %}
    </tr>
    <tr>
      <td colspan="4"></td>
    </tr>
  </table>
  <!-- <button type="submit" class="btn btn-fill btn-sm btn-primary">Buscar</button> -->
<button type="button" hx-get="{% url render_url %}" hx-target="#table_div" class="btn btn-fill btn-sm btn-primary" hx-debug>
  Buscar
</button>
</form>
</div>
<div class="card-body px-0 pt-0 pb-2">
  <div id="#table_div" class="table-responsive p-0">
    {#% render_table table %#}
  </div>
</div>
{% endblock %}
