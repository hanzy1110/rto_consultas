<!-- myapp/mymodel_list.html -->
{% extends 'layouts/base.html' %}

{% block content %}
{% load render_table from django_tables2 %}
{% load getattr %}
<h1>{{ context_object_name }}</h1>
<div class="card-body px-0 pt-0 pb-2">
<form method="GET">
  {% for field, name in query_fields.items %}
    <h5>{{ name }}</h5>
    <input type="text" name="{{ field }}" placeholder="Buscar...">
  {% endfor %}

  {% for ffield, aux in form_fields.items %}
      {% for name, vals in aux.items %}
       <label for={{ ffield }}>{{ name }}</label>
        <select name="{{ ffield }}" id="{{ ffield }}">
          <option value=""></option>
        {% for val in vals %}
          <option value="{{ val }}">{% query_descriptions descriptions ffield val %}</option>
        {% endfor %}
      {% endfor %}
    </select>
  {% endfor %}

  <button type="submit" class="btn btn-fill btn-sm btn-primary">Buscar</button>
</form>
</div>
<div class="card-body px-0 pt-0 pb-2">
  <div class="table-responsive p-0">
    {% render_table table %}
  </div>
</div>
{% endblock %}